---
globs: **/*secret*.yaml,**/*Secret*.yaml
description: Security guidelines for handling secrets and sensitive data
---

# Security and Secrets Management

## ⚠️ CRITICAL: No Direct Secrets

**NEVER commit Kubernetes Secret resources directly to this repository.**

## Use ExternalSecrets

Instead of creating `Secret` resources, use `ExternalSecret` resources:

```yaml
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: vault-api-secret
  namespace: openshift-config
spec:
  secretStoreRef:
    name: cluster-secret-store
    kind: ClusterSecretStore
  target:
    name: vault-api-secret
    creationPolicy: Owner
  data:
    - secretKey: password
      remoteRef:
        key: secret/vault-api
        property: password
```

## ClusterSecretStore Reference
All ExternalSecrets should reference the `cluster-secret-store` ClusterSecretStore configured in the bootstrap process.

## Security Checklist
- [ ] No plaintext passwords, tokens, or API keys
- [ ] Use ExternalSecret instead of Secret resources  
- [ ] Reference existing ClusterSecretStore
- [ ] Proper RBAC permissions for secret access
- [ ] Secrets scoped to appropriate namespaces

## Secret Store Integration
Secrets are fetched from external secure stores (Vault, AWS Secrets Manager, etc.) and synchronized by the External Secrets Operator.

**Remember**: The goal is to maintain security while keeping this repository as the single source of truth for cluster configuration.